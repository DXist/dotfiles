---

- name: Install dotfiles symlinks
  file: src={{ playbook_dir }}/{{ item }} dest=~/{{ item }} state=link force=true
  with_items:
    - .ackrc
    - .agignore
    - .backup.exclude.list
    - .bash_functions
    - .bash_profile
    - .bashrc
    - .ctags
    - .dir_colors
    - .git_template
    - .gitattributes
    - .gitconfig
    - .gitignore
    - .gnupg
    - .hgrc
    - .ideavimrc
    - .jshintrc
    - .pdbrc
    - .pdbrc.py
    - .pylama.ini
    - .pythonrc
    - .screenrc
    - .termcap
    - .terminfo
    - .tmux.conf
    - .vim
    - .vimrc
  tags:
    - links

- name: Create required directories
  file: path={{ item }} state=directory
  with_items:
    - ~/go
    - ~/envs
    - ~/.config
  tags:
    - links

- name: Install extra symlinks
  file: src={{ playbook_dir }}/{{ item.path }} dest=~/{{ item.dest }} state=link force=true
  with_items:
    - { path: 'bin', dest: 'bin' }
    - { path: 'envs/postactivate', dest: 'envs/postactivate' }
    - { path: 'envs/postmkvirtualenv', dest: 'envs/postmkvirtualenv' }
    - { path: 'config/pudb', dest: '.config/pudb' }
    - { path: '.vim', dest: '.config/nvim' }
  tags:
    - links

- name: Install neobundle
  git: repo=git@github.com:Shougo/neobundle.vim.git dest={{ playbook_dir }}/.vim/bundle/neobundle.vim

- name: Install go tools
  command: go get github.com/junkblocker/codesearch/...
  environment:
    GOPATH: "{{ lookup('ENV', 'HOME') }}/go"
  when: SKIP_SUDO is not defined
  tags:
    - gotools
